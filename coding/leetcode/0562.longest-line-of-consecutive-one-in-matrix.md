# Longest Line of Consecutive One in Matrix
[562. Longest Line of Consecutive One in Matrix](https://leetcode.com/problems/longest-line-of-consecutive-one-in-matrix/)

Given an m x n binary matrix mat, return the length of the longest line of consecutive one in the matrix.

# Key insights
- Use a 3D DP array where dp[row][col][d] tracks the length of consecutive 1s ending at (row, col) in direction d (horizontal, vertical, diagonal, anti-diagonal)
- Each direction has its own recurrence relation referencing the appropriate predecessor cell
- Track the global maximum across all 4 directions during the DP fill

# Code
```javascript
/**
 * @param {number[][]} M
 * @return {number}
 */
var longestLine = function(M) {
    if (M.length == 0) return 0;
    let ones = 0;
    const dp = [...Array(M.length)].map(_ => [...Array(M[0].length)].map(_ => [...Array(4)].fill(0)));
    for (let row = 0; row < M.length; row++) {
      for (let col = 0; col < M[0].length; col++) {
        if (M[row][col] === 1) {
          dp[row][col][0] = col > 0 ? dp[row][col - 1][0] + 1 : 1;
          dp[row][col][1] = row > 0 ? dp[row - 1][col][1] + 1 : 1;
          dp[row][col][2] = (row > 0 && col > 0) ? dp[row - 1][col - 1][2] + 1 : 1;
          dp[row][col][3] = (row > 0 && col < M[0].length - 1) ? dp[row - 1][col + 1][3] + 1 : 1;
          ones =
              Math.max(
                  ones,
                  Math.max(Math.max(dp[row][col][0], dp[row][col][1], dp[row][col][2], dp[row][col][3]))
              );
        }
      }
    }
    return ones;   
};
```

# Complexity
**Time:** O(m * n) -- visit each cell once with constant work per cell
**Space:** O(m * n) -- for the 3D DP array (m * n * 4)
