# How Many Numbers Are Smaller Than the Current Number
[1365. How Many Numbers Are Smaller Than the Current Number](https://leetcode.com/problems/how-many-numbers-are-smaller-than-the-current-number/)

Given the array nums, for each nums[i] find out how many numbers in the array are smaller than it. That is, for each nums[i] you have to count the number of valid j's such that j != i and nums[j] < nums[i].

# Key insights
- Sorts a copy of the array; each element's first occurrence index in the sorted array equals the count of smaller elements
- Uses a Map to store the first occurrence index for each value (duplicates naturally get the same count)
- Maps original array values back to their counts using the precomputed map

# Code
```javascript
/**
 * @param {number[]} nums
 * @return {number[]}
 */
var smallerNumbersThanCurrent = function(nums) {
    const map = new Map();
    const res = [...nums].sort((a,b) => a - b);
    for (let i = 0; i < res.length; i++) {
        if (!map.has(res[i])) {
            map.set(res[i], i);
        }
    }

    for (let i = 0; i < nums.length; i++) {
        res[i] = map.get(nums[i]);
    }
    return res;
};
```

# Complexity
**Time:** O(n log n) -- dominated by the sort
**Space:** O(n) -- for the sorted copy and the map
