# Count Square Submatrices with All Ones
[1277. Count Square Submatrices with All Ones](https://leetcode.com/problems/count-square-submatrices-with-all-ones/)

Given a m * n matrix of ones and zeros, return how many square submatrices have all ones.

# Key insights
- dp[i][j] represents the side length of the largest all-ones square with its bottom-right corner at (i, j)
- Each dp value also equals the count of all-ones squares ending at that cell (squares of size 1, 2, ..., dp[i][j])
- Transition: dp[i][j] = 1 + min(dp[i-1][j], dp[i][j-1], dp[i-1][j-1]) when matrix[i][j] is 1

# Code
```javascript
/**
 * @param {number[][]} matrix
 * @return {number}
 */
var countSquares = function(matrix) {
    const dp = [...Array(matrix.length)].map(a => [...Array(matrix[0].length)].fill(0));
    
    let sum = 0;

    for (let i = 0; i < matrix.length; i++) {
        dp[i][0] = matrix[i][0];
        sum += dp[i][0];
    }

    for (let i = 1; i < matrix[0].length; i++) {
        dp[0][i] = matrix[0][i];
        sum += dp[0][i];
    }
    
    for (let row = 1; row < matrix.length; row++) {
        for (let col = 1; col < matrix[0].length; col++) {
            if (matrix[row][col] === 1) {
                dp[row][col] = 1 + Math.min(dp[row - 1][col], dp[row][col - 1], dp[row - 1][col - 1]);
            }
            sum += dp[row][col];
        }
    }
    return sum;
};
```

# Complexity
**Time:** O(m * n) -- iterates through every cell once
**Space:** O(m * n) -- for the DP table
