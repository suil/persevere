# Jump Game IV
[1345. Jump Game IV](https://leetcode.com/problems/jump-game-iv/)

Given an array of integers arr, you are initially positioned at the first index of the array.

# Key insights
- BFS from index 0 to find the shortest path to the last index, considering jumps to i-1, i+1, and all indices with the same value
- Groups indices by value in a map for O(1) lookup of same-value neighbors
- Deletes the value group from the map after processing to avoid revisiting all same-value indices, preventing TLE

# Code
```javascript
var minJumps = function(arr) {
    const n = arr.length;
    if (n === 1) return 0;

    const map = new Map();
    for (let i = 0; i < n; i++) {
        if (!map.has(arr[i])) map.set(arr[i], []);
        map.get(arr[i]).push(i);
    }

    const visited = new Array(n).fill(false); // FIX: Track visited nodes globally for BFS
    visited[0] = true;
    let queue = [0];
    let steps = 0;

    while (queue.length) { // FIX: Use BFS for shortest path
        const nextQueue = [];
        for (const idx of queue) {
            if (idx === n - 1) return steps;
            // Move to idx - 1
            if (idx - 1 >= 0 && !visited[idx - 1]) {
                visited[idx - 1] = true;
                nextQueue.push(idx - 1);
            }
            // Move to idx + 1
            if (idx + 1 < n && !visited[idx + 1]) {
                visited[idx + 1] = true;
                nextQueue.push(idx + 1);
            }
            // Move to all same-value indices
            if (map.has(arr[idx])) {
                for (const nei of map.get(arr[idx])) {
                    if (!visited[nei]) {
                        visited[nei] = true;
                        nextQueue.push(nei);
                    }
                }
                map.delete(arr[idx]);
            }
        }
        queue = nextQueue;
        steps++;
    }
    return -1; // Should never happen per constraints
};
```

# Complexity
**Time:** O(n) -- each index is visited at most once, and each value group is processed once then deleted
**Space:** O(n) -- for the value-to-indices map, visited array, and queue
