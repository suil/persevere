# Car Fleet
[853. Car Fleet](https://leetcode.com/problems/car-fleet/)

There are n cars at given miles away from the starting mile 0, traveling to reach the mile target.

# Key insights
*

# Code
```javascript
/**
 * @param {number} target
 * @param {number[]} position
 * @param {number[]} speed
 * @return {number}
 */
var carFleet = function(target, position, speed) {
    // const stack = [];
    // const len = position.length;

    // function canReachTarget(car1, car2) {
    //     if (car1.pos === car2.pos) return true;

    //     if (car1.spe === car2.spe) return false;

    //     let newPos1 = car1.pos;
    //     let newPos2 = car2.pos;

    //     let tick = 1;
    //     while (true) {
    //         if (newPos1 === newPos2) return true;

    //         if (newPos1 > target || newPos2 > target) return false;

    //         newPos1 += car1.spe * tick;
    //         newPos2 += car1.spe * tick;
    //         tick++;
    //     }
    // }

    // for (let i = 0; i < len; i++) {
    //     let pos = position[i];
    //     let spe = speed[i];

    //     while (stack.length > 0 && canReachTarget(stack.at(-1), { pos, spe })) {
    //         const prev = stack.pop();
    //         pos = // calculate new pos
    //         spe = Math.min(spe, prev.speed);
    //     }

    //     stack.push({ pos, spe });
    // }

    // return stack.length;
    const n = position.length;
    const cars = [];

    // Step 1: Combine position and speed into a single array and sort by position (descending)
    for (let i = 0; i < n; i++) {
        cars.push({ position: position[i], speed: speed[i]});
    }
    cars.sort((a, b) => b.position - a.position);

    // Step 2: Use a monotonic stack to count fleets
    const stack = [];
    for (const car of cars) {
        const time = (target - car.position) / car.speed;

        // If the current car cannot catch up to the fleet at the top of the stack, it forms a new fleet
        if (stack.length === 0 || stack.at(-1) < time) {
            stack.push(time);
        }
    }

    return stack.length;
};
/*
[10,8,0,5,3]
(12, 2)
(12, 2), (0, 1)
(12, 2), (0, 1), (5, 1)
(12, 2), (0, 1), (6, 1)
*/
```

# Complexity
**Time:**
**Space:**
