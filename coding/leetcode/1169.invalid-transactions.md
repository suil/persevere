# Invalid Transactions
[1169. Invalid Transactions](https://leetcode.com/problems/invalid-transactions/)

A transaction is possibly invalid if:
- the amount exceeds $1000, or
- if it occurs within (and including) 60 minutes of another transaction with the same name in a different city.

You are given an array of strings transaction where transactions[i] consists of comma-separated values representing the name, time, amount, and city.

Return a list of transactions that are possibly invalid. You may return the answer in any order.

# Key insights
* A transaction is invalid if amount > 1000 OR there exists another transaction with the same name, different city, and time difference <= 60
* Group transactions by name to efficiently compare only relevant pairs
* For each group with the same name, compare all pairs to check the city/time conditions
* Use a set to track invalid transaction indices to avoid duplicates

# Code
```javascript
var invalidTransactions = function(transactions) {
    const parsed = transactions.map((t, i) => {
        const [name, time, amount, city] = t.split(',');
        return { name, time: parseInt(time), amount: parseInt(amount), city, index: i };
    });

    const map = new Map();
    for (const t of parsed) {
        if (!map.has(t.name)) map.set(t.name, []);
        map.get(t.name).push(t);
    }

    const invalidSet = new Set();

    for (const t of parsed) {
        if (t.amount > 1000) invalidSet.add(t.index);

        const group = map.get(t.name);
        for (const other of group) {
            if (other.city !== t.city && Math.abs(other.time - t.time) <= 60) {
                invalidSet.add(t.index);
                invalidSet.add(other.index);
            }
        }
    }

    return [...invalidSet].map(i => transactions[i]);
};
```

# Complexity
**Time:** O(n^2) - In the worst case, all transactions share the same name, requiring comparison of every pair.
**Space:** O(n) - Space is used for the parsed transactions, the grouping map, and the set of invalid indices.
