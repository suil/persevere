# Sum of Subarray Minimums
[907. Sum of Subarray Minimums](https://leetcode.com/problems/sum-of-subarray-minimums/)

Given an array of integers arr, find the sum of min(b), where b ranges over every (contiguous) subarray of arr. Since the answer may be large, return the answer modulo 109 + 7.

# Key insights
*

# Code
```javascript
/**
 * @param {number[]} arr
 * @return {number}
 */
var sumSubarrayMins = function(arr) {
    const MOD = 1000000007;
    const n = arr.length;

    const nextSmaller = new Array(n).fill(n);
    const prevSmaller = new Array(n).fill(-1);
    let stack = []; // Stores indices

    for (let i = 0; i < n; i++) {
        while (stack.length > 0 && arr[stack.at(-1)] > arr[i]) {
            nextSmaller[stack.pop()] = i;
        }
        stack.push(i);
    }

    stack = [];
    for (let i = n - 1; i >= 0; i--) {
        while (stack.length > 0 && arr[stack.at(-1)] >= arr[i]) {
            prevSmaller[stack.pop()] = i;
        }
        stack.push(i);
    }

    let res = 0;
    for (let i = 0; i < n; i++) {
        const left = i - prevSmaller[i];
        const right = nextSmaller[i] - i;
        res = (res + arr[i] * left * right) % MOD;
    }

    return res;
};
```

# Complexity
**Time:**
**Space:**
