# Populating Next Right Pointers in Each Node II
[117. Populating Next Right Pointers in Each Node II](https://leetcode.com/problems/populating-next-right-pointers-in-each-node-ii/)

Given a binary tree

# Key insights
- BFS level-order traversal; connect nodes at the same level by iterating through the queue and setting queue[i].next = queue[i+1]
- Works for any binary tree (not just perfect trees) since BFS naturally handles missing children
- Build the next level's queue from left and right children of current level's nodes

# Code
```javascript
/**
 * // Definition for a _Node.
 * function _Node(val, left, right, next) {
 *    this.val = val === undefined ? null : val;
 *    this.left = left === undefined ? null : left;
 *    this.right = right === undefined ? null : right;
 *    this.next = next === undefined ? null : next;
 * };
 */

/**
 * @param {_Node} root
 * @return {_Node}
 */
var connect = function(root) {
    let queue = [];
    if (root) queue.push(root);
    while (queue.length > 0) {
        for (let i = 0; i < queue.length - 1; i++) {
            queue[i].next = queue[i + 1];
        }

        const nextQueue = [];
        for (const node of queue) {
            node.left && nextQueue.push(node.left);
            node.right && nextQueue.push(node.right);
        }
        queue = nextQueue;
    }
    return root;
};
```

# Complexity
**Time:** O(n)**Space:** O(n) for the queue
