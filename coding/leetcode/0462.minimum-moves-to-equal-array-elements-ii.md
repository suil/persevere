# Minimum Moves to Equal Array Elements II
[462. Minimum Moves to Equal Array Elements II](https://leetcode.com/problems/minimum-moves-to-equal-array-elements-ii/)

Given an integer array nums of size n, return the minimum number of moves required to make all array elements equal.

# Key insights
- The optimal target value that minimizes total moves is the median of the array
- Uses Quickselect (partition-based selection) to find the median in expected O(n) time without fully sorting
- After finding the median, sum the absolute differences of each element from it

# Code
```javascript
/**
 * @param {number[]} nums
 * @return {number}
 */
var minMoves2 = function(nums) {
    let move = 0;
    const median = findKthSmallest(nums, Math.floor(nums.length / 2));
    for (const num of nums) {
        move += Math.abs(num - median);
    }
    return move;
};

function findKthSmallest(nums, k) {
    let l = 0, h = nums.length - 1;
    while (l < h) {
        let j = partition(nums, l, h);
        if (j == k) {
            break;
        }
        if (j < k) {
            l = j + 1;
        } else {
            h = j - 1;
        }
    }
    return nums[k];
}

function partition(nums, l, h) {
    let i = l, j = h + 1;
    while (true) {
        while (nums[++i] < nums[l] && i < h) ;
        while (nums[--j] > nums[l] && j > l) ;
        if (i >= j) {
            break;
        }
        swap(nums, i, j);
    }
    swap(nums, l, j);
    return j;
}

function swap(nums, i, j) {
    const tmp = nums[i];
    nums[i] = nums[j];
    nums[j] = tmp;
}

```

# Complexity
**Time:** O(n) average, O(n^2) worst case -- Quickselect for median plus O(n) summation
**Space:** O(1) -- in-place partitioning
