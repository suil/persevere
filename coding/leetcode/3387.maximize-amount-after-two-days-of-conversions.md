# Maximize Amount After Two Days of Conversions
[3387. Maximize Amount After Two Days of Conversions](https://leetcode.com/problems/maximize-amount-after-two-days-of-conversions/)

You are given a string initialCurrency, and you start with 1.0 of initialCurrency.

# Key insights
*

# Code
```javascript
/**
 * @param {string} initialCurrency
 * @param {string[][]} pairs1
 * @param {number[]} rates1
 * @param {string[][]} pairs2
 * @param {number[]} rates2
 * @return {number}
 */
var maxAmount = function(initialCurrency, pairs1, rates1, pairs2, rates2) {
  // Build adjacency graph from pairs & rates
  function buildGraph(pairs, rates) {
    const graph = new Map(); // currency -> Array of [nextCurrency, rate]
    const addEdge = (from, to, r) => {
      if (!graph.has(from)) graph.set(from, []);
      graph.get(from).push([to, r]);
    };

    for (let i = 0; i < pairs.length; i++) {
      const [a, b] = pairs[i];
      const r = rates[i];
      addEdge(a, b, r);
      addEdge(b, a, 1 / r);
    }
    return graph;
  }

  // DFS (or could use BFS) to compute best rates from initial
  function computeBest(graph, init) {
    const best = new Map(); // currency -> best rate from init
    function dfs(cur, acc) {
      if (best.has(cur) && best.get(cur) > acc) return;
      best.set(cur, acc);
      for (const [next, rate] of graph.get(cur) || []) {
        if (!best.has(next)) {
          dfs(next, acc * rate);
        }
      }
    }
    dfs(init, 1.0);
    return best;
  }

  const g1 = buildGraph(pairs1, rates1);
  const g2 = buildGraph(pairs2, rates2);

  const best1 = computeBest(g1, initialCurrency);
  console.log(best1)
  const best2 = computeBest(g2, initialCurrency);

  let answer = 1.0; // At least doing nothing, you keep 1.0 of initial
  for (const [currency, amt1] of best1.entries()) {
    if (best2.has(currency)) {
      const amt2 = best2.get(currency);
      // converting back gives amt1 / amt2
      const candidate = amt1 / amt2;
      if (candidate > answer) {
        answer = candidate;
      }
    }
  }

  return answer;
};

/*
EUR => USD => JPY => USD => CHF => EUR
*/
```

# Complexity
**Time:**
**Space:**
