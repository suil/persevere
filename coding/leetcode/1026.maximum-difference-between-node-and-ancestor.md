# Maximum Difference Between Node and Ancestor
[1026. Maximum Difference Between Node and Ancestor](https://leetcode.com/problems/maximum-difference-between-node-and-ancestor/)

With O(n2) complexity

with O(n) complexity

# Key insights
* Use DFS with ancestor tracking to maintain path from root to current node
* Backtrack by pushing/popping nodes to reuse ancestor array across different paths
* For each node, compare with all ancestors in current path to find maximum difference
* Tree traversal pattern ensures all ancestor-descendant pairs are evaluated exactly once

# Code
```javascript
var maxAncestorDiff = function(root) {
    let max = -Infinity;
    
    function helper(node, ancesters) {
        if (node === null) {
            return;
        }
        
        ancesters.push(node);
        helper(node.left, ancesters);
        ancesters.pop();
        
        for (const ancester of ancesters) {
            max = Math.max(max, Math.abs(ancester.val - node.val));
        }
        
        ancesters.push(node);
        helper(node.right, ancesters);
        ancesters.pop();
    }

    helper(root, []);
    return max;
}
```
```javascript
var maxAncestorDiff = function(root) {
    const helper = (node, min, max) => {
        if (!node) { return 0 };

        const newMin = Math.min(min, node.val);
        const newMax = Math.max(max, node.val);

        const left = helper(node.left, newMin, newMax);
        const right = helper(node.right, newMin, newMax);

        return Math.max(newMax - newMin, left, right);
    };

    return helper(root, Infinity, -Infinity);
};
```

# Complexity
**Solution 1:**
**Time:** O(nÂ²) - For each node, we iterate through all its ancestors in the path, leading to quadratic time in the worst case (skewed tree)
**Space:** O(n) - The ancestors array can store up to n nodes in the worst case (skewed tree), plus recursion stack space

**Solution 2:**
**Time:** O(n) - We visit each node exactly once and perform constant time operations at each node
**Space:** O(h) - Only requires recursion stack space proportional to the height of the tree
